{"version":3,"sources":["/home/thaotonto/Desktop/Workplace/Nodejs/WebProject/src/app/main/search/search.component.css","/home/thaotonto/Desktop/Workplace/Nodejs/WebProject/src/app/main/search/search.component.html","/home/thaotonto/Desktop/Workplace/Nodejs/WebProject/src/app/main/search/search.component.ts","/home/thaotonto/Desktop/Workplace/Nodejs/WebProject/src/app/main/search/search.module.ts"],"names":[],"mappings":"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","file":"search.module.chunk.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".btn-block {\\n  display: block;\\n  width: 100%;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/thaotonto/Desktop/Workplace/Nodejs/WebProject/src/app/main/search/search.component.css\n// module id = ../../../../../src/app/main/search/search.component.css\n// module chunks = search.module","module.exports = \"<div class=\\\"addFavUrl\\\" style=\\\"display: block;\\\">\\n  <form (ngSubmit)=\\\"search()\\\" class=\\\"\\\" action=\\\"\\\" method=\\\"post\\\" style=\\\"display: inline-block\\\">\\n    <div class=\\\"form-group\\\">\\n      <input type=\\\"text\\\" [(ngModel)]=\\\"keyword\\\" name=\\\"url\\\" id=\\\"favUrl\\\" placeholder=\\\"Nhập từ khóa tìm kiếm\\\"\\n             class=\\\"form-control favUrl url\\\">\\n    </div>\\n  </form>\\n  <ss-multiselect-dropdown *ngIf=\\\"categorySelectOption\\\" [settings]=\\\"mySettings\\\" [options]=\\\"categorySelectOption\\\"\\n                           [(ngModel)]=\\\"selectedCategory\\\" [texts]=\\\"myTextCategory\\\">\\n\\n  </ss-multiselect-dropdown>\\n  <ss-multiselect-dropdown *ngIf=\\\"shopSelectOption\\\" [settings]=\\\"mySettings\\\" [options]=\\\"shopSelectOption\\\"\\n                           [(ngModel)]=\\\"selectedShop\\\" [texts]=\\\"myTextShop\\\">\\n\\n  </ss-multiselect-dropdown>\\n  <button class=\\\"btn btn-default\\\" type=\\\"\\\" style=\\\"width: 250px;height: 34px;\\\" (click)=\\\"search()\\\">Tìm kiếm</button>\\n</div>\\n\\n<div class=\\\"panel-fav-urls\\\" style=\\\"display: block;\\\">\\n  <div class=\\\"heading\\\">\\n    Kết quả tìm kiếm\\n    <h2 *ngIf=\\\"isNotFound\\\">Không có kết quả</h2>\\n  </div>\\n  <div class=\\\"showFavUrl\\\" style=\\\"width: 100%\\\">\\n    <div id=\\\"post-container-main\\\" class=\\\"grid showFavUrl\\\" [hidden]=\\\"!isDataLoaded\\\">\\n\\n    </div>\\n\\n  </div>\\n  <div id=\\\"post-container-temp\\\" hidden>\\n\\n  </div>\\n  <div *ngIf=\\\"isLoading\\\" class=\\\"sk-folding-cube loading\\\">\\n    <div class=\\\"sk-cube1 sk-cube\\\"></div>\\n    <div class=\\\"sk-cube2 sk-cube\\\"></div>\\n    <div class=\\\"sk-cube4 sk-cube\\\"></div>\\n    <div class=\\\"sk-cube3 sk-cube\\\"></div>\\n  </div>\\n</div>\\n<a href=\\\"javascript:\\\" id=\\\"return-to-top\\\" (click)=\\\"scrollToTop()\\\"><i class=\\\"fa fa-chevron-up\\\"></i></a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/thaotonto/Desktop/Workplace/Nodejs/WebProject/src/app/main/search/search.component.html\n// module id = ../../../../../src/app/main/search/search.component.html\n// module chunks = search.module","import {Component, NgZone, OnDestroy, OnInit} from '@angular/core';\nimport {Category, Post, Shop} from '../../core/models/models.component';\nimport {ShopService} from '../../core/services/shop/shop.service';\nimport {CategoryService} from '../../core/services/category/category.service';\nimport {IMultiSelectOption, IMultiSelectSettings, IMultiSelectTexts} from 'angular-2-dropdown-multiselect';\nimport {ApiUrlConstants} from '../../core/common/api.url.constants';\nimport {FbpostService} from '../../core/services/fbpost/fbpost.service';\nimport {Observable} from 'rxjs/Rx';\nimport {PostService} from '../../core/services/post/post.service';\n\ndeclare const $: any;\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.css']\n})\nexport class SearchComponent implements OnInit, OnDestroy {\n  shopList: Shop[];\n\n  categoryList: Category[];\n  mySettings: IMultiSelectSettings = {\n    selectionLimit: 1,\n    buttonClasses: 'btn btn-outline-primary',\n    checkedStyle: 'fontawesome',\n    autoUnselect: true,\n    enableSearch: true,\n    closeOnSelect: true,\n    pullRight: true\n  };\n  myTextShop: IMultiSelectTexts = {\n    defaultTitle: 'Chọn shop',\n  };\n\n  myTextCategory: IMultiSelectTexts = {\n    defaultTitle: 'Chọn category'\n  };\n\n  pageIndex = 1;\n  pageSize = 12;\n  private isEndPage = false;\n  public isLoading = false;\n  private mySubscribe;\n  isFirstTime = true;\n  isNotFound = false;\n  isDataLoaded = false;\n  postList: Post[] = [];\n\n  shopSelectOption: IMultiSelectOption[];\n  categorySelectOption: IMultiSelectOption[];\n  selectedShop: String;\n  selectedCategory: String;\n  keyword: String = '';\n\n\n  constructor(private shopService: ShopService, private categoryService: CategoryService, private ngZone: NgZone,\n              private fbPostService: FbpostService, private postService: PostService) {\n    window.onscroll = () => {\n      if ($(window).scrollTop() >= 100) { // If page is scrolled more than 50px\n        $('#return-to-top').fadeIn(200); // Fade in the arrow\n      } else {\n        $('#return-to-top').fadeOut(200); // Else fade out the arrow\n      }\n      if ($(window).height() * 3 / 2 + $(window).scrollTop() > $(document).height() - 100) {\n        ngZone.run(() => {\n          if (!this.isEndPage && !this.isLoading) {\n            this.pageIndex++;\n            this.isLoading = true;\n            if (this.fbPostService.getItemCount() > 0) {\n              this.loadPost();\n            }\n          }\n        });\n      }\n    };\n  }\n\n  ngOnInit() {\n    this.loadShop();\n    this.loadCategory();\n    this.fbPostService.initFacebook();\n    this.fbPostService.setRootContainer('#post-container-main', '#post-container-temp');\n    this.mySubscribe = Observable.interval(500).subscribe(x => {\n      this.fbPostService.layoutIfNeeded();\n    });\n  }\n\n  loadPost() {\n    this.postService.searchPost(this.keyword, this.selectedShop, this.selectedCategory, this.pageIndex, this.pageSize)\n      .subscribe((response: Post[]) => {\n        if (!response || response.length === 0) {\n          this.isEndPage = true;\n        }\n        if (this.isFirstTime && response.length === 0) {\n          this.isNotFound = true;\n        }\n        this.isFirstTime = false;\n\n        this.postList.push(...response);\n        this.fbPostService.addPost(response, () => {\n          this.isDataLoaded = true;\n          this.isLoading = false;\n          this.fbPostService.relayout();\n        });\n      }, error2 => alert('Error'));\n  }\n\n  loadShop() {\n    this.shopService.getAllShop().subscribe((response: Shop[]) => {\n      this.shopList = response;\n      this.shopSelectOption = [];\n      for (const shop of this.shopList) {\n        this.shopSelectOption.push({id: shop.permalink_url, name: shop.name});\n      }\n    });\n  }\n\n  loadCategory() {\n    this.categoryService.getAllCategory().subscribe((response: Category[]) => {\n      this.categoryList = response;\n      this.categorySelectOption = [];\n      for (const category of this.categoryList) {\n        this.categorySelectOption.push({id: category.name, name: category.alias});\n      }\n    });\n  }\n\n  search() {\n    this.fbPostService.clearRootContainer();\n    this.isNotFound = false;\n    this.postList = [];\n    this.isFirstTime = true;\n    this.pageIndex = 1;\n    this.isDataLoaded = false;\n    this.isLoading = true;\n    this.loadPost();\n    console.log(ApiUrlConstants.SEARCH_POST(this.keyword, this.selectedShop, this.selectedCategory, this.pageIndex, this.pageSize))\n  }\n\n  scrollToTop() {\n    $('body,html').animate({\n      scrollTop: 0 // Scroll to top of body\n    }, 500);\n  }\n\n  ngOnDestroy(): void {\n    this.mySubscribe.unsubscribe();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/thaotonto/Desktop/Workplace/Nodejs/WebProject/src/app/main/search/search.component.ts","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {SearchComponent} from './search.component';\nimport {RouterModule, Routes} from '@angular/router';\nimport {CategoryService} from '../../core/services/category/category.service';\nimport {ShopService} from '../../core/services/shop/shop.service';\nimport {MultiselectDropdownModule} from 'angular-2-dropdown-multiselect';\nimport {FormsModule} from '@angular/forms';\nimport {PostService} from '../../core/services/post/post.service';\nimport {FbpostService} from '../../core/services/fbpost/fbpost.service';\n\nconst routes: Routes = [\n  {path: '', component: SearchComponent}\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    MultiselectDropdownModule,\n    FormsModule\n  ],\n  providers: [CategoryService, ShopService, PostService, FbpostService],\n  declarations: [SearchComponent]\n})\nexport class SearchModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/thaotonto/Desktop/Workplace/Nodejs/WebProject/src/app/main/search/search.module.ts"],"sourceRoot":"webpack:///"}